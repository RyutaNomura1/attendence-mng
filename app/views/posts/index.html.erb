<section class = "w1100-container">
  <h1>投稿一覧</h1>
  
  
  <% @lists.each do |list| %>
    <% if list.class == Post %>
  
      <section class = "post-container">
          <%= link_to user_path(list.user) do %>
            <%= attachment_image_tag list.user, :profile_image, class: "profile_image m-2", fallback: "no_image.jpg", size: '40x40' %>
          <% end %>
        <div class="d-inline-block align-middle">
          <%= link_to user_path(list.user) do %>
            <p class="post-top-element d-inline post-username"><%= list.user.username %></p>
          <% end %>
          <p class="post-top-element d-inline post-location"><%= list.location %></p>
          <p class="post-top-element post-title"><%= list.title %></p>
        </div>
        <%= link_to post_favorites_path(list), method: :post, remote: true do %>
          <%= attachment_image_tag list, :post_image, class: "d-block", style: "margin: 0 auto ;", size: '500x500' %>
        <% end %>
        <div>
          <%= simple_format list.body, class: "post-body" %>
            <!--エラー候補-->
          <p class = "pb-1 post-created-at"><%= list.created_at.strftime("%Y-%m-%d %H:%M") %></p>
        </div>
          <ul class="mb-0 pr-3 pb-1 text-right">
            <div class="post-font-awesome d-inline-block" id="favorite-post-<%= list.id%>">
              <%= render "favorites/favorite", post: list %>
            </div>
        <% if current_user.id == list.user.id%>
            <%= link_to edit_post_path(list), class: " d-inline-block" do %>
                <i class="fas fa-pen post-font-awesome"></i>
            <% end %>
            <%= link_to post_path(list), class: "d-inline-block", data: {confirm: "投稿を削除しますか？"}, method: :delete do %>
              <i class="far fa-trash-alt post-font-awesome"></i>
            <% end %>
          </ul>
        <% end %>  
      </section>
      
    <% elsif list.class == Question %> <!--クラスがQuestionの場合-->
    
      <section class="question-container">
          <%= link_to user_path(list.user) do %>
            <%= attachment_image_tag list.user, :profile_image, class: "profile_image m-2", fallback: "no_image.jpg", size: '40x40' %>
          <% end %>
        <div class="d-inline-block align-middle">
          <%= link_to user_path(list.user) do %>
            <p class="post-top-element d-inline post-username"><%= list.user.username %></p>
          <% end %>
          <p class="post-top-element post-title"><%= list.question_title %></p>
        </div>
       
        <div>
          <%= simple_format list.question_body, class: "post-body" %>
            <!--エラー候補-->
          <p class = "pb-1 post-created-at"><%= list.created_at.strftime("%Y-%m-%d %H:%M") %></p>
        </div>
          <ul class="mb-0 pr-3 pb-1 text-right">
            <div class="post-font-awesome d-inline-block" id="favorite-post-<%= list.id%>">
              <%= render "favorites/favorite", post: list %>
            </div>
        <% if current_user.id == list.user.id%>
            <%= link_to edit_post_path(list), class: " d-inline-block" do %>
                <i class="fas fa-pen post-font-awesome"></i>
            <% end %>
            <%= link_to post_path(list), class: "d-inline-block", data: {confirm: "投稿を削除しますか？"}, method: :delete do %>
              <i class="far fa-trash-alt post-font-awesome"></i>
            <% end %>
          </ul>
        <% end %>  
        
      </section>
    <% end %>
      
  <% end %>
  
</section>